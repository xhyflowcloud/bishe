<!DOCTYPE html>
<html>
<head>
    <meta charset=" utf-8" />
    <title>iview example</title>
    <style>
    </style>

</head>
<body style="background: #f1f1f1">

<link href="https://static.360buyimg.com/popd/popd_common/css/pop-design.min.css" type="text/css" rel="stylesheet">
<script src="https://static.360buyimg.com/popd/js/vue.min.js" type="text/javascript"></script>
<script src="https://static.360buyimg.com/popd/popd_common/pop-design.min.js" type="text/javascript"></script>
<script type="text/javascript" src="/js/vue-router-0.7.10.js"></script>
<script type="text/javascript" src="/js/vue-resource-1.3.4.min.js"></script>
<script type="text/javascript" src="/js/countdown.js"></script>
<script type="text/javascript" src="/js/vue.config.js"></script>

<div id="root">
    <router-view></router-view>
</div>

<script type="text/x-template" id="register">
    <div id="rootApp">
        <router-view></router-view>
        <p-card class="form" v-if="registerVisible">
            <p slot="title" style="text-align:center;">
                <span style="color: #e3e8ee;font-size: 20px">注册</span>
            </p>
            <p-form  v-ref:user :rules="ruleInline" label-position="right" >
                <p-form-item rule-key="user" :value="user.name">
                    <p-input style="width: 300px" type="text" :value.sync="user.name" placeholder="请输入用户名">
                        <p-icon type="ios-person-outline" slot="prepend"></p-icon>
                    </p-input>
                </p-form-item>

                <p-form-item rule-key="email" :value="user.email">
                    <p-input style="width: 300px" type="email" :value.sync="user.email" placeholder="请输入邮箱">
                        <p-icon type="ios-email-outline" slot="prepend"></p-icon>
                    </p-input>
                </p-form-item>

                <p-form-item rule-key="password" :value="user.pwd">
                    <p-input style="width: 300px" type="password" :value.sync="user.pwd" placeholder="请输入用密码">
                        <p-icon type="ios-locked-outline" slot="prepend"></p-icon>
                    </p-input>
                </p-form-item>
                <p-form-item rule-key="repassword" :value="repassword">
                    <p-input style="width: 300px" type="password" :value.sync="repassword" placeholder="请确认密码">
                        <p-icon type="ios-locked-outline" slot="prepend"></p-icon>

                    </p-input>
                </p-form-item>

                <p-form-item>
                    <p-button long shape ="circle" type="success" @click="registerSubmit('user')">注册</p-button>
                </p-form-item>
                <p-form-item style="text-align:right;">
                    <a href="#"  @click="showLogin">重新登录</a>
                </p-form-item>
            </p-form>
        </p-card>

        <p-card class="form" v-if="loginVisible">
            <p slot="title" style="text-align:center;">
                <span style="color: #e3e8ee;font-size: 20px">登录</span>
            </p>
            <p-form v-ref:user :rules="ruleInline" label-position="right" >

                <p-form-item rule-key="email" :value="user.email">
                    <p-input size ="large" style="width: 300px" type="email" :value.sync="user.email" placeholder="请输入邮箱">
                        <p-icon type="ios-email-outline" slot="prepend"></p-icon>
                    </p-input>
                </p-form-item>

                <p-form-item rule-key="password" :value="user.pwd">
                    <p-input size ="large"  style="width: 300px" type="password" :value.sync="user.pwd" placeholder="请输入密码">
                        <p-icon type="ios-locked-outline" slot="prepend"></p-icon>
                    </p-input>
                </p-form-item>

                <p-form-item>
                    <p-button long size ="large" shape ="circle" type="success" @click="loginSubmit('user')">登录</p-button>
                </p-form-item>
                <p-form-item style="text-align:right;">
                    <a href="#"  @click="showRegister">立即注册</a>
                </p-form-item>
                <!-- 这个user就是v-ref:user的uesr 这个是vue对组件起名字的方式 -->
            </p-form>
        </p-card>

    </div>
</script>
<script type="text/x-template" id="index">
    <div id="app">

        <p-menu mode="horizontal" :theme="theme" active-key="1">
            <p-menu-item key="1">
                <p-icon type="ios-paper"></p-icon>
                首页
            </p-menu-item>
            <p-menu-item key="2">
                <p-icon type="ios-people"></p-icon>
                用户管理
            </p-menu-item>
            <p-menu-item key="4" style="float: right" @click="quitQuery">
                <p-icon type="log-out"></p-icon>
                退出
            </p-menu-item>
            <p-menu-item key="5" style="float: right">
                <p-icon type="settings"></p-icon>
                {{register.email}}
            </p-menu-item>

        </p-menu>
        <p-row>
            <p-col span="4" style="height:660px;">
                <div id="menubar" style="display: inline-block; float: left; width:100%;height: 100%;background-color: #464c5b">
                    <p-menu class="width" :theme="theme">
                        <p-menu-item key="1" @click="examroomQuery"><p-icon type="stats-bars"></p-icon>考场信息管理</p-menu-item>
                        <p-menu-item key="2" @click="studentQuery"><p-icon type="stats-bars"></p-icon>考生信息管理</p-menu-item>
                        <p-menu-item key="3" @click="teacherQuery"><p-icon type="stats-bars"></p-icon>监考人员信息管理</p-menu-item>
                        <p-menu-item key="4" @click="classroomQuery"><p-icon type="stats-bars"></p-icon>教室信息管理</p-menu-item>
                        <p-menu-item key="5" @click="subjectQuery"><p-icon type="stats-bars"></p-icon>考试科目信息管理</p-menu-item>
                    </p-menu>
                </div>
            </p-col>
            <p-col span="20">
                <div id="detailmenu" style="display: inline-block; height: 100%;width: 100%">
                    <router-view></router-view>
                </div>
            </p-col>
        </p-row>
    </div>
</script>
<script type="text/x-template" id="examroom">

    <div class="shopweb-card-body" style="margin-top: 30px; padding: 5px">
        <p-form :label-width="80" label-position="right">
            <p-row :gutter="10">
                <p-col span="8">
                    <p-form-item label="教室编号">
                        <p-input :value.sync="classroomQuery.id" placeholder="请输入教室编号..." @keyup="digitalCheck" @blur="digitalCheck" style="width:240px"></p-input>
                    </p-form-item>
                </p-col>
                <p-col span="8">
                    <p-form-item label="教室大小">
                        <p-input :value.sync="classroomQuery.size" placeholder="请输入教室大小..." @keyup="digitalCheck" @blur="digitalCheck" style="width:240px"></p-input>
                    </p-form-item>
                </p-col>
                <p-col span="8">
                    <p-form-item label="教室位置">
                        <p-input :value.sync="classroomQuery.position" placeholder="请输入教室位置..." @keyup="digitalCheck" @blur="digitalCheck" style="width:240px"></p-input>
                    </p-form-item>
                </p-col>
            </p-row>

            <p-row :gutter="10">
                <p-col span="8">
                    <p-form-item label="是否启用">
                        <p-select :model.sync="classroomQuery.isEnable" clearable="false" style="width: 240px">
                            <p-option  v-for="item in IsOrNot" :value="item.value">{{ item.label }}</p-option>
                        </p-select></p-input>
                    </p-form-item>
                </p-col>
            </p-row>

            <p style="text-align: center;margin-bottom: 15px;">
                <p-button type="primary" @click="submitQuery" >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;查询&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p-button>
                <p-button type="ghost" @click="reset" style="margin-left: 8px" >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;重置&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p-button>
            </p>
        </p-form >
        <p style="text-align: right;">
            <p-button @click="addClick" type="primary" size="small">增加</p-button>
        </p>
        <p-table size = "small" border :columns="columns6" :data="classrooms" v-ref:table></p-table>
        <div style="float:right">
            <p-page :total="classroomQuery.totalRecord" :current.sync="classroomQuery.pageIndex" :page-size.sync="classroomQuery.pageSize" :page-size-opts="[5,10,20]"  @on-change="doClassroomQuery" @on-page-size-change="doClassroomQuery" class="pageClass" show-total show-elevator></p-page>
        </div>
        <p-button class="pageClass" type="primary" size="large" @click="exportData(1)" posi>
            <p-icon type="ios-download-outline"></p-icon> 导出原始数据</p-button>
        <p-button type="primary" size="large" @click="exportData(2)">
            <p-icon type="ios-download-outline"></p-icon> 导出排序和过滤后的数据</p-button>
        <p-button type="primary" size="large" @click="exportData(3)">
            <p-icon type="ios-download-outline"></p-icon> 导出自定义数据</p-button>
    </div>
    <p-modal :visible.sync="modalAdd" @on-ok="addSubmit" @on-cancel="cancel">
        <p slot="header">
            <span>增加教室信息</span>
        </p>
        <div style="text-align:center;">
            <p-form label-position="right" >
                <p-form-item label="教室大小">
                    <p-input style="width: 300px" type="text" :value.sync="classroom.size" placeholder="教室大小">
                    </p-input>
                </p-form-item>

                <p-form-item label="教室位置">
                    <p-input style="width: 300px" type="email" :value.sync="classroom.position" placeholder="教室位置">
                    </p-input>
                </p-form-item>
            </p-form>
        </div>
    </p-modal>
    <p-modal :visible.sync="modalDelete" @on-ok="deleteSubmit" @on-cancel="cancel">
        <p slot="header">
            <span>删除教室信息</span>
        </p>
        <div style="text-align:center;">
            <p-form label-position="right" >
                <p-form-item label="教室编号">
                    <p-input style="width: 300px" type="text" :value.sync="classroom.id" placeholder="教室编号">
                    </p-input>
                </p-form-item>
            </p-form>
        </div>
    </p-modal>
    <p-modal :visible.sync="modalUpdate" @on-ok="updateSubmit" @on-cancel="cancel">
        <p slot="header">
            <span>修改教室信息</span>
        </p>
        <div style="text-align:center;">
            <p-form label-position="right" :label-width="80">
                <p-form-item label="教室编号 ">
                    <p-input style="width: 300px" type="text" :value.sync="classroom.id">
                    </p-input>
                </p-form-item>
                <p-form-item label="教室大小 ">
                    <p-input style="width: 300px" type="text" :value.sync="classroom.size">
                    </p-input>
                </p-form-item>
                <p-form-item label="教室位置 ">
                    <p-input style="width: 300px" type="email" :value.sync="classroom.position">
                    </p-input>
                </p-form-item>
                <p-form-item label="是否启用 ">
                    <p-select :model.sync="classroom.isEnable" style="width:300px; text-align: center">
                        <p-option clearable="false" v-for="item in IsOrNot" :value="item.value">{{ item.label }}</p-option>
                    </p-select>
                </p-form-item>
            </p-form>
        </div>
    </p-modal>
</script>
<script type="text/x-template" id="classroom">

    <div class="shopweb-card-body" style="margin-top: 30px; padding: 5px">
        <p-form :label-width="80" label-position="right">
            <p-row :gutter="10">
                <p-col span="8">
                    <p-form-item label="教室编号">
                        <p-input :value.sync="classroomQuery.id" placeholder="请输入教室编号..." @keyup="digitalCheck" @blur="digitalCheck" style="width:240px"></p-input>
                    </p-form-item>
                </p-col>
                <p-col span="8">
                    <p-form-item label="教室大小">
                        <p-input :value.sync="classroomQuery.size" placeholder="请输入教室大小..." @keyup="digitalCheck" @blur="digitalCheck" style="width:240px"></p-input>
                    </p-form-item>
                </p-col>
                <p-col span="8">
                    <p-form-item label="教室位置">
                        <p-input :value.sync="classroomQuery.position" placeholder="请输入教室位置..." @keyup="digitalCheck" @blur="digitalCheck" style="width:240px"></p-input>
                    </p-form-item>
                </p-col>
            </p-row>

            <p-row :gutter="10">
                <p-col span="8">
                    <p-form-item label="是否启用">
                        <p-select :model.sync="classroomQuery.isEnable" clearable="false" style="width: 240px">
                            <p-option  v-for="item in IsOrNot" :value="item.value">{{ item.label }}</p-option>
                        </p-select></p-input>
                    </p-form-item>
                </p-col>
            </p-row>

            <p style="text-align: center;margin-bottom: 15px;">
                <p-button type="primary" @click="submitQuery" >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;查询&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p-button>
                <p-button type="ghost" @click="reset" style="margin-left: 8px" >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;重置&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p-button>
            </p>
        </p-form >
        <p style="text-align: right;">
            <p-button @click="addClick" type="primary" size="small">增加</p-button>
        </p>
        <p-table size = "small" border :columns="columns6" :data="classrooms" v-ref:table></p-table>
        <div style="float:right">
            <p-page :total="classroomQuery.totalRecord" :current.sync="classroomQuery.pageIndex" :page-size.sync="classroomQuery.pageSize" :page-size-opts="[5,10,20]"  @on-change="submitQuery" @on-page-size-change="submitQuery" class="pageClass" show-total show-elevator></p-page>
        </div>
        <p-button class="pageClass" type="primary" size="large" @click="exportData(1)" posi>
            <p-icon type="ios-download-outline"></p-icon> 导出原始数据</p-button>
        <p-button type="primary" size="large" @click="exportData(2)">
            <p-icon type="ios-download-outline"></p-icon> 导出排序和过滤后的数据</p-button>
        <p-button type="primary" size="large" @click="exportData(3)">
            <p-icon type="ios-download-outline"></p-icon> 导出自定义数据</p-button>
    </div>
    <p-modal :visible.sync="modalAdd" @on-ok="addSubmit" @on-cancel="cancel">
        <p slot="header">
            <span>增加教室信息</span>
        </p>
        <div style="text-align:center;">
            <p-form label-position="right" >
                <p-form-item label="教室大小">
                    <p-input style="width: 300px" type="text" :value.sync="classroom.size" placeholder="教室大小">
                    </p-input>
                </p-form-item>

                <p-form-item label="教室位置">
                    <p-input style="width: 300px" type="email" :value.sync="classroom.position" placeholder="教室位置">
                    </p-input>
                </p-form-item>
            </p-form>
        </div>
    </p-modal>
    <p-modal :visible.sync="modalDelete" @on-ok="deleteSubmit" @on-cancel="cancel">
        <p slot="header">
            <span>删除教室信息</span>
        </p>
        <div style="text-align:center;">
            <p-form label-position="right" >
                <p-form-item label="教室编号">
                    <p-input style="width: 300px" type="text" :value.sync="classroom.id" placeholder="教室编号">
                    </p-input>
                </p-form-item>
            </p-form>
        </div>
    </p-modal>
    <p-modal :visible.sync="modalUpdate" @on-ok="updateSubmit" @on-cancel="cancel">
        <p slot="header">
            <span>修改教室信息</span>
        </p>
        <div style="text-align:center;">
            <p-form label-position="right" :label-width="80">
                <p-form-item label="教室编号 ">
                    <p-input style="width: 300px" type="text" :value.sync="classroom.id">
                    </p-input>
                </p-form-item>
                <p-form-item label="教室大小 ">
                    <p-input style="width: 300px" type="text" :value.sync="classroom.size">
                    </p-input>
                </p-form-item>
                <p-form-item label="教室位置 ">
                    <p-input style="width: 300px" type="email" :value.sync="classroom.position">
                    </p-input>
                </p-form-item>
                <p-form-item label="是否启用 ">
                    <p-select :model.sync="classroom.isEnable" style="width:300px; text-align: center">
                        <p-option clearable="false" v-for="item in IsOrNot" :value="item.value">{{ item.label }}</p-option>
                    </p-select>
                </p-form-item>
            </p-form>
        </div>
    </p-modal>
</script>
<script type="text/x-template" id="student">

    <div class="shopweb-card-body" style="margin-top: 30px; padding: 5px">
        <p-form :label-width="80" label-position="right">
            <p-row :gutter="10">
                <p-col span="8">
                    <p-form-item label="准考证号">
                        <p-input :value.sync="studentQuery.sid" placeholder="请输入准考证号..." @keyup="digitalCheck" @blur="digitalCheck" style="width:240px"></p-input>
                    </p-form-item>
                </p-col>
                <p-col span="8">
                    <p-form-item label="姓名">
                        <p-input :value.sync="studentQuery.name" placeholder="请输入姓名..." @keyup="digitalCheck" @blur="digitalCheck" style="width:240px"></p-input>
                    </p-form-item>
                </p-col>
                <p-col span="8">
                    <p-form-item label="身份证号">
                        <p-input :value.sync="studentQuery.id" placeholder="请输入身份证号..." @keyup="digitalCheck" @blur="digitalCheck" style="width:240px"></p-input>
                    </p-form-item>
                </p-col>
            </p-row>
            <p-row>
                <p-col span="8">
                    <p-form-item label="考试科目编号">
                        <p-input :value.sync="studentQuery.subjectid" placeholder="请输入考试科目编号..." @keyup="digitalCheck" @blur="digitalCheck" style="width:240px"></p-input>
                    </p-form-item>
                </p-col>
            </p-row>
            <p style="text-align: center;margin-bottom: 15px;">
                <p-button type="primary" @click="submitQuery" >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;查询&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p-button>
                <p-button type="ghost" @click="reset" style="margin-left: 8px" >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;重置&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p-button>
            </p>
        </p-form >
        <p style="text-align: right;">
            <p-button @click="addClick" type="primary" size="small">增加</p-button>
        </p>
        <p-table size = "small" border :columns="columns6" :data="students" v-ref:table></p-table>
        <div style="float:right">
            <p-page :total="studentQuery.totalRecord" :current.sync="studentQuery.pageIndex" :page-size.sync="studentQuery.pageSize" :page-size-opts="[5,10,20]"  @on-change="submitQuery" @on-page-size-change="submitQuery" class="pageClass" show-total show-elevator></p-page>
        </div>
        <p-button class="pageClass" type="primary" size="large" @click="exportData(1)" posi>
            <p-icon type="ios-download-outline"></p-icon> 导出原始数据</p-button>
        <p-button type="primary" size="large" @click="exportData(2)">
            <p-icon type="ios-download-outline"></p-icon> 导出排序和过滤后的数据</p-button>
        <p-button type="primary" size="large" @click="exportData(3)">
            <p-icon type="ios-download-outline"></p-icon> 导出自定义数据</p-button>
    </div>
    <p-modal :visible.sync="modalAdd" @on-ok="addSubmit" @on-cancel="cancel">
        <p slot="header">
            <span>增加报名信息</span>
        </p>
        <div style="text-align:center;">
            <p-form label-position="right" :label-width="100">
                <p-form-item label="姓名">
                    <p-input style="width: 300px" type="text" :value.sync="student.name" placeholder="姓名">
                    </p-input>
                </p-form-item>
                <p-form-item label="身份证号">
                    <p-input style="width: 300px" type="text" :value.sync="student.id" placeholder="身份证号">
                    </p-input>
                </p-form-item>
                <p-form-item label="报名科目 ">
                    <p-select :model.sync="student.subjectid" style="width:300px; text-align: center">
                        <p-option clearable="false" v-for="item in subjects" :value="item.id">{{ item.name }}</p-option>
                    </p-select>
                </p-form-item>
            </p-form>
        </div>
    </p-modal>
</script>
<script type="text/x-template" id="teacher">
    <div class="shopweb-card-body" style="margin-top: 20px; padding: 5px">
        <p-form :label-width="80" label-position="right">
            <p-row :gutter="10">
                <p-col span="8">
                    <p-form-item label="监考人员编号">
                        <p-input :value.sync="teacherQuery.id" placeholder="请输入监考人员编号..." @keyup="digitalCheck" @blur="digitalCheck" style="width:240px"></p-input>
                    </p-form-item>
                </p-col>
                <p-col span="8">
                    <p-form-item label="监考人员姓名">
                        <p-input :value.sync="teacherQuery.name" placeholder="请输入监考人员姓名..." @keyup="digitalCheck" @blur="digitalCheck" style="width:240px"></p-input>
                    </p-form-item>
                </p-col>
                <p-col span="8">
                    <p-form-item label="是否监考过">
                        <p-select :model.sync="teacherQuery.isInvigilator" clearable="false" style="width: 240px">
                            <p-option v-for="item in IsOrNot" :value="item.value">{{ item.label }}</p-option>
                        </p-select></p-input>
                    </p-form-item>
                </p-col>
            </p-row>

            <p-row :gutter="10">
                <p-col span="8" v-if="teacher.isInvigilator = true">
                    <p-form-item label="监考次数">
                        <p-input :value.sync="teacherQuery.numInvigilator" placeholder="请输入监考次数..." @keyup="digitalCheck" @blur="digitalCheck" style="width:240px"></p-input>
                    </p-form-item>
                </p-col>
                <p-col span="8">
                    <p-form-item label="是否有监考事故">
                        <p-select :model.sync="teacherQuery.accInvigilator" clearable="false" style="width: 240px">
                            <p-option  v-for="item in IsOrNot" :value="item.value">{{ item.label }}</p-option>
                        </p-select></p-input>
                    </p-form-item>
                </p-col>
            </p-row>

            <p style="text-align: center;margin-bottom: 15px;">
                <p-button type="primary" @click="submitQuery" >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;查询&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p-button>
                <p-button type="ghost" @click="reset" style="margin-left: 8px" >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;重置&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p-button>
            </p>
        </p-form>
        <p style="text-align: right;">
            <p-button @click="addClick" type="primary" size="small">增加</p-button>
        </p>
        <p-table :columns="columns7" :data="teachers" v-ref:table></p-table>
        <div style="float:right">
            <p-page :total="teacherQuery.totalRecord" :current.sync="teacherQuery.pageIndex" :page-size.sync="teacherQuery.pageSize" :page-size-opts="[5,10,20]"  @on-change="submitQuery" @on-page-size-change="submitQuery" class="pageClass"></p-page>
        </div>
        <p-button class="pageClass" type="primary" size="large" @click="exportData(1)" posi>
        <p-icon type="ios-download-outline"></p-icon> 导出原始数据</p-button>
        <p-button type="primary" size="large" @click="exportData(2)">
            <p-icon type="ios-download-outline"></p-icon> 导出排序和过滤后的数据</p-button>
        <p-button type="primary" size="large" @click="exportData(3)">
            <p-icon type="ios-download-outline"></p-icon> 导出自定义数据</p-button>
    </div>
    <p-modal :visible.sync="modalAdd" @on-ok="addSubmit" @on-cancel="cancel">
        <p slot="header">
            <span>增加监考人员信息</span>
        </p>
        <div style="text-align:center;">
            <p-form label-position="right" :label-width="100">
                <p-form-item label="监考人员姓名">
                    <p-input :value.sync="teacher.name" style="width: 300px"  placeholder="请输入监考人员姓名..." @keyup="digitalCheck" @blur="digitalCheck" style="width:240px"></p-input>
                </p-form-item>
                <p-form-item label="是否监考过">
                    <p-select :model.sync="teacher.isInvigilator" style="width: 300px" clearable="false" style="width: 240px">
                        <p-option  v-for="item in IsOrNot" :value="item.value">{{ item.label }}</p-option>
                    </p-select></p-input>
                </p-form-item>
                <p-form-item label="监考次数">
                    <p-input :value.sync="teacher.numInvigilator" style="width: 300px" placeholder="请输入监考次数..." @keyup="digitalCheck" @blur="digitalCheck" style="width:240px"></p-input>
                </p-form-item>
                <p-form-item label="是否有监考事故">
                    <p-select :model.sync="teacher.accInvigilator" style="width: 300px" clearable="false" style="width: 240px">
                        <p-option  v-for="item in IsOrNot" :value="item.value">{{ item.label }}</p-option>
                    </p-select></p-input>
                </p-form-item>
            </p-form>
        </div>
    </p-modal>
    <p-modal :visible.sync="modalDelete" @on-ok="deleteSubmit" @on-cancel="cancel">
        <p slot="header">
            <span>删除监考人员信息</span>
        </p>
        <div style="text-align:center;">
            <p-form label-position="right" :label-width="100">
                <p-form-item label="监考人员编号">
                    <p-input :value.sync="teacher.id" style="width: 300px" placeholder="请输入监考人员编号..." @keyup="digitalCheck" @blur="digitalCheck" style="width:240px"></p-input>
                </p-form-item>
            </p-form>
        </div>
    </p-modal>
    <p-modal :visible.sync="modalUpdate" @on-ok="updateSubmit" @on-cancel="cancel">
        <p slot="header">
            <span>修改监考人员信息</span>
        </p>
        <div style="text-align:center;">
            <p-form label-position="right" :label-width="100">
                <p-form-item label="监考人员编号">
                    <p-input :value.sync="teacher.id" style="width: 300px"  placeholder="请输入监考人员编号..." @keyup="digitalCheck" @blur="digitalCheck" style="width:240px"></p-input>
                </p-form-item>
                <p-form-item label="监考人员姓名">
                    <p-input :value.sync="teacher.name" style="width: 300px" placeholder="请输入监考人员姓名..." @keyup="digitalCheck" @blur="digitalCheck" style="width:240px"></p-input>
                </p-form-item>
                <p-form-item label="是否监考过">
                    <p-select style="width: 300px">
                        <p-option :model.sync="teacher.isInvigilator"  clearable="false" v-for="item in IsOrNot" :value="item.value">{{ item.label }}</p-option>
                    </p-select></p-input>
                </p-form-item>
                <p-form-item label="监考次数">
                    <p-input :value.sync="teacher.numInvigilator" style="width: 300px" placeholder="请输入监考次数..." @keyup="digitalCheck" @blur="digitalCheck" style="width:240px"></p-input>
                </p-form-item>
                <p-form-item label="是否有监考事故">
                    <p-select style="width: 300px">
                        <p-option :model.sync="teacher.accInvigilator" style="width: 300px" clearable="false" v-for="item in IsOrNot" :value="item.value">{{ item.label }}</p-option>
                    </p-select></p-input>
                </p-form-item>
            </p-form>
        </div>
    </p-modal>
</script>
<script type="text/x-template" id="subject">
    <div v-if="main" class="shopweb-card-body" style="margin-top: 30px; padding: 5px">
        <p-form :label-width="120" label-position="right">
            <p-row :gutter="10">
                <p-col span="8">
                    <p-form-item label="考试科目编号">
                        <p-input :value.sync="subjectQuery.id" placeholder="请输入考试科目编号..." @keyup="digitalCheck" @blur="digitalCheck" style="width:240px"></p-input>
                    </p-form-item>
                </p-col>
                <p-col span="8">
                    <p-form-item label="考试科目名称">
                        <p-input :value.sync="subjectQuery.name" placeholder="请输入考试科目名称..." @keyup="digitalCheck" @blur="digitalCheck" style="width:240px"></p-input>
                    </p-form-item>
                </p-col>
            </p-row>
            <p style="text-align: center;margin-bottom: 15px;">
                <p-button type="primary" @click="submitQuery" >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;查询&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p-button>
                <p-button type="ghost" @click="reset" style="margin-left: 8px" >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;重置&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p-button>
            </p>
        </p-form >
        <p style="text-align: right;">
            <p-button @click="addClick" type="primary" size="small">增加</p-button>
        </p>
        <p-table size = "small" border :columns="columns6" :data="subjects" v-ref:table></p-table>
        <div style="float:right">
            <p-page :total="studentQuery.totalRecord" :current.sync="studentQuery.pageIndex" :page-size.sync="studentQuery.pageSize" :page-size-opts="[5,10,20]"  @on-change="submitQuery" @on-page-size-change="submitQuery" class="pageClass" show-total show-elevator></p-page>
        </div>
        <p-button class="pageClass" type="primary" size="large" @click="exportData(1)" posi>
            <p-icon type="ios-download-outline"></p-icon> 导出原始数据</p-button>
        <p-button type="primary" size="large" @click="exportData(2)">
            <p-icon type="ios-download-outline"></p-icon> 导出排序和过滤后的数据</p-button>
        <p-button type="primary" size="large" @click="exportData(3)">
            <p-icon type="ios-download-outline"></p-icon> 导出自定义数据</p-button>
    </div>
    <div v-if="detail" class="shopweb-card-body" style="margin-top: 30px; padding: 5px">
    <p-form :label-width="120" label-position="right" style="margin-bottom: 20px">
            <span>
                <p-button type="primary" @click="assignClick" style="margin-left: 8px" >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;分配考场&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p-button>
            </span>
            <span style="float: right">
                <p-button type="ghost" @click="goback" style="margin-left: 8px;" >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;返回&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p-button>
            </span>
    </p-form >

    <p-table size = "small" border :columns="columns4" :data="students"></p-table>
    <p-modal :visible.sync="modalAssign" @on-ok="assignSubmit" @on-cancel="cancel">
        <p slot="header">
            <span>分配考场</span>
        </p>
        <div >
            <p-form label-position="right" :label-width="150">
                <p-form-item label="考场大小">
                    <p-input style="width: 240px" type="text" :value.sync="examroom.number" placeholder="考场大小"></p-input>
                </p-form-item>
            </p-form>
        </div>
    </p-modal>
    <p-modal :visible.sync="modalAdd" @on-ok="addSubmit" @on-cancel="cancel">
        <p slot="header">
            <span>增加考试科目信息</span>
        </p>
        <div >
            <p-form label-position="right" :label-width="150">
                <p-form-item label="报名开始日期">
                    <p-date-picker :value.sync="subject.bmstarttime" type="datetime" placeholder="报名开始日期" style="width: 240px;" ></p-date-picker>
                </p-form-item>
                <p-form-item label="报名结束日期">
                    <p-date-picker :value.sync="subject.bmendtime" type="datetime" placeholder="报名结束日期" style="width: 240px" ></p-date-picker>
                </p-form-item>
                <p-form-item label="考试开始日期">
                    <p-date-picker :value.sync="subject.starttime" type="datetime" placeholder="考试开始日期" style="width: 240px" ></p-date-picker>
                </p-form-item>
                <p-form-item label="考试结束日期">
                    <p-date-picker :value.sync="subject.endtime" type="datetime" placeholder="考试结束日期" style="width: 240px" ></p-date-picker>
                </p-form-item>
                <p-form-item label="考试科目名称">
                    <p-input style="width: 240px" type="text" :value.sync="subject.name" placeholder="考试科目名称">
                    </p-input>
                </p-form-item>
                <p-form-item label="报名人数">
                    <p-input style="width: 240px" type="text" :value.sync="subject.maxnumber" placeholder="报名人数"></p-input>
                </p-form-item>
            </p-form>
        </div>
    </p-modal>
    </div>
</script>
<script>
    var LoginView = Vue.extend({
        template: '#register',
        data: function () {
            var validatePass = (rule, value, callback) => {
                if (value === '') {
                    callback(new Error('请再次输入密码'));
                } else if (value !== this.user.pwd) {
                    callback(new Error('两次输入密码不一致!'));
                } else {
                    callback();
                }
            };
            var email = (rule, value, callback) => {
                var mal = /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;
                if (!value) {
                    return callback(new Error('不能为空'));
                }
                if (!(mal.test(value))) {
                    callback(new Error('请输入正确邮箱'));
                } else {
                    callback();
                }
            };
            return {
                ruleInline: {
                    user: [{
                        required: true,
                        message: '请填写用户名',
                    }],
                    password: [{
                        required: true,
                        message: '请填写密码',
                        trigger: 'blur',
                    }, {
                        type: 'string',
                        min: 6,
                        message: '密码长度不能小于6位',
                        trigger: 'blur',
                    }],
                    repassword: [{
                        required: true,
                        message: '请填写确认密码',
                        trigger: 'blur',
                    }, {
                        validator: validatePass,
                        trigger: 'blur',
                    }],
                    email: [{
                        required: true,
                        message: '请填写邮箱',
                        trigger: 'blur',
                    }, {
                        validator: email,
                        triger: 'blur',
                    }]
                },
                user: {
                    name: '',
                    pwd: '',
                    email: '',
                },
                repassword: '',
                theme: 'dark',
                loginVisible: true,
                registerVisible: false,
            }
        },
        methods: {

            registerSubmit: function (name) {
                this.$refs[name].validate(function (valid) {
                    if (valid) {
                        this.$http.post('/index/register', this.user).then(function (res) {
                            if(res.body.status == 200){
                                this.$Message.success('注册成功');
                                this.registerVisible = false;
                                this.loginVisible = true;
                            }else if(res.body.status == 664){
                                this.$Message.error(res.body.data);
                            }
                        });
                    } else {
                        this.$Message.error('表单验证失败!');
                    }
                }.bind(this));
                //bind 是改变一个函数的this指向；这儿就是把function(valid)内部的this指向改成外面vue 的this（this劫持）
            },
            loginSubmit: function (name) {
                this.$refs[name].validate(function (valid) {
                    if (valid) {
                        this.$http.post('/index/login', this.user).then(function (res) {
                            if (res.body.status == 200) {
                                this.$Message.success('登录成功');
                                document.cookie = "token="+res.body.data;
                                this.$router.go({
                                    path: '/index',
                                    query: {email: this.user.email}
                                });
                            }
                            else {
                                this.$Message.error(res.body.data);
                                this.reset();
                            }
                        });
                    } else {
                        this.$Message.error('表单验证失败!');
                    }
                }.bind(this));
                //bind 是改变一个函数的this指向；这儿就是把function(valid)内部的this指向改成外面vue 的this（this劫持）
            },
            showLogin: function () {
                this.loginVisible = true;
                this.registerVisible = false;
            },
            showRegister: function () {
                this.loginVisible = false;
                this.registerVisible = true;
            },
            reset: function(){
              this.user.name = '';
              this.user.email = '';
              this.user.pwd = '';
            }
        },
    });
    var examroom = Vue.extend({
        template: '#examroom',
        data: function() {
            return{
                modalAdd: false,
                modalDelete: false,
                modalUpdate: false,
                IsOrNot:[{
                    value: 'true',
                    label: '是'
                },{
                    value: 'false',
                    label: '否'
                }],
                email: '',
                classroomQuery: {
                    id: '',
                    size: '',
                    position: '',
                    isEnable: '',
                    pageIndex:1,
                    pageSize:10,
                    totalRecord:0
                },
                classroom:{
                    id: '',
                    size: '',
                    position: '',
                    isEnable: 'false',
                },
                classrooms: [],
                columns6: [{
                    "title": "教室编号",
                    "key": "id",
                    align: 'center',
                }, {
                    "title": "教室大小",
                    "key": "size",
                    align: 'center',
                    "sortable": true,
                    filters: [{
                        label: '大于30',
                        value: 1
                    }, {
                        label: '小于30',
                        value: 2
                    }],
                    filterMultiple: false,
                    filterMethod: function(value, row) {
                        if (value === 1) {
                            return row.size >= 30;
                        } else if (value === 2) {
                            return row.size < 30;
                        }
                    }
                }, {
                    "title": "教室位置",
                    "key": "position",
                    "sortable": false,
                    align: 'center'
                }, {
                    "title": "开始时间",
                    "key": "starttime",
                    "sortable": false,
                    align: 'center',
                },{
                    "title": "结束时间",
                    "key": "starttime",
                    "sortable": false,
                    align: 'center',
                },{
                    "title": "是否启用",
                    "key": "isEnable",
                    "sortable": false,
                    align: 'center',
                },{
                    "title": "操作",
                    "key": "operate",
                    "sortable": false,
                    align: 'center',
                    render: function (row,column,index) {
                        return '<p-button @click="updateClick" style="margin-left: 8px" type="primary" size="small">修改</p-button><p-button @click="deleteClick" style="margin-left: 8px" type="error" size="small">删除</p-button>';
                    }
                }],
            }
        },
        created:function () {
            this.email=this.$route.query.email;
        },
        methods: {
            reset: function () {
                this.classroomQuery.id='';
                this.classroomQuery.size= '';
                this.classroomQuery.position= '';
                this.classroomQuery.isEnable='' ;
                this.classroomQuery.pageIndex=1;
                this.classroomQuery.pageSize=10;
                this.classroomQuery.totalRecord=0;
            },
            addClick: function () {
                this.modalAdd = true;
            },
            deleteClick: function(){
                this.modalDelete = true;
            },
            updateClick: function(){
                this.modalUpdate = true;
            },
            addSubmit: function () {
                this.$http.post('/classroom/' + this.email + '/add', this.classroom).then(function (res) {
                    if(1 == res.body) {
                        this.$Message.success("增加成功");
                    }
                    else if(0 == res.body){
                        this.$Message.error("增加失败");
                    }
                    else if(2 == res.body){
                        this.$Message.error("用户为空");
                    }
                    else if(3 == res.body){
                        this.$Message.error("用户没有权限");
                    }
                    else if(4 == res.body){
                        this.$Message.error("没有此用户");
                    }
                    this.modalAdd = false;
                });
            },
            deleteSubmit: function () {
                this.$http.post('/classroom/' + this.email + '/delete', this.classroom).then(function (res) {
                    if(1 == res.body) {
                        this.$Message.success("删除成功");
                    }
                    else if(0 == res.body){
                        this.$Message.error("删除失败");
                    }
                    else if(2 == res.body){
                        this.$Message.error("用户为空");
                    }
                    else if(3 == res.body){
                        this.$Message.error("用户没有权限");
                    }
                    else if(4 == res.body){
                        this.$Message.error("没有此用户");
                    }
                    this.modalDelete = false;
                });
            },
            updateSubmit: function () {
                this.$http.post('/classroom/' + this.email + '/update', this.classroom).then(function (res) {
                    if(1 == res.body) {
                        this.$Message.success("修改成功");
                    }
                    else if(0 == res.body){
                        this.$Message.error("修改失败");
                    }
                    else if(2 == res.body){
                        this.$Message.error("用户为空");
                    }
                    else if(3 == res.body){
                        this.$Message.error("用户没有权限");
                    }
                    else if(4 == res.body){
                        this.$Message.error("没有此用户");
                    }
                    else if(5 == res.body){
                        this.$Message.error("该教室正在被使用，不能修改");
                    }
                    this.modalUpdate = false;
                });
            },
            doClassroomQuery:function () {
                this.classrooms = [];
                this.$http.post("/classroom/query",this.classroomQuery).then(function (response) {
                    this.classrooms = response.body.results;
                    this.classroomQuery.totalRecord = response.body.totalRecord;
                })
            },
            submitQuery: function(){
                this.classrooms = [];
                this.$http.post('/classroom/query', this.classroomQuery).then(function (res) {
                    this.classrooms = res.body.results;
                    this.classroomQuery.totalRecord = res.body.totalRecord;
                });
            },
            exportData: function(type) {
                if (type === 1) {
                    this.$refs.table.exportCsv({
                        filename: '原始数据'
                    });
                } else if (type === 2) {
                    this.$refs.table.exportCsv({
                        filename: '排序和过滤后的数据',
                        original: false
                    });
                } else if (type === 3) {
                    this.$refs.table.exportCsv({
                        filename: '自定义数据',
                        columns: this.columns4.filter(function(col, index) {
                            return index < 4
                        }),
                        data: this.classrooms.filter(function(data, index) {
                            return index < 4
                        })
                    });
                }
            }
        }
    });
    var classroom = Vue.extend({
        template: '#classroom',
        data: function() {
            return{
                modalAdd: false,
                modalDelete: false,
                modalUpdate: false,
                IsOrNot:[{
                    value: 'true',
                    label: '是'
                },{
                    value: 'false',
                    label: '否'
                }],
                email: '',
                classroomQuery: {
                    id: '',
                    size: '',
                    position: '',
                    isEnable: '',
                    pageIndex:1,
                    pageSize:10,
                    totalRecord:0
                },
                classroom:{
                    id: '',
                    size: '',
                    position: '',
                    isEnable: 'false',
                },
                classrooms: [],
                columns6: [{
                    "title": "教室编号",
                    "key": "id",
                    align: 'center',
                }, {
                    "title": "教室大小",
                    "key": "size",
                    align: 'center',
                    "sortable": true,
                    filters: [{
                        label: '大于30',
                        value: 1
                    }, {
                        label: '小于30',
                        value: 2
                    }],
                    filterMultiple: false,
                    filterMethod: function(value, row) {
                        if (value === 1) {
                            return row.size >= 30;
                        } else if (value === 2) {
                            return row.size < 30;
                        }
                    }
                }, {
                    "title": "教室位置",
                    "key": "position",
                    "sortable": false,
                    align: 'center'
                }, {
                    "title": "开始时间",
                    "key": "starttime",
                    "sortable": false,
                    align: 'center',
                },{
                    "title": "结束时间",
                    "key": "endtime",
                    "sortable": false,
                    align: 'center',
                },{
                    "title": "是否启用",
                    "key": "isEnable",
                    "sortable": false,
                    align: 'center',
                },{
                    "title": "操作",
                    "key": "operate",
                    "sortable": false,
                    align: 'center',
                    render: function (row,column,index) {
                        return '<p-button @click="updateClick('+row.id+')" style="margin-left: 8px" type="primary" size="small">修改</p-button><p-button @click="deleteSubmit('+row.id+')" style="margin-left: 8px" type="error" size="small">删除</p-button>';
                    }
                }],
            }
        },
        created:function () {
            this.email=this.$route.query.email;
        },
        methods: {
            reset: function () {
                this.classroomQuery.id='';
                this.classroomQuery.size= '';
                this.classroomQuery.position= '';
                this.classroomQuery.isEnable='' ;
                this.classroomQuery.pageIndex=1;
                this.classroomQuery.pageSize=10;
                this.classroomQuery.totalRecord=0;
            },
            addClick: function () {
                this.modalAdd = true;
            },
            updateClick: function(id){
                this.classroom = {};
                this.classroom.id = id;
                this.modalUpdate = true;
            },
            addSubmit: function () {
                this.$http.post('/classroom/add', this.classroom).then(function (res) {
                    if(res.body.status == 200){
                        this.$Message.success("添加成功");
                    }else{
                        this.$Message.error(res.body.data);
                    }
                    this.modalAdd = false;
                });
            },
            deleteSubmit: function (id) {
                this.classroom = {};
                this.classroom.id = id;
                this.$http.post('/classroom/delete', this.classroom).then(function (res) {
                    if(res.body.status == 200){
                        this.$Message.success("删除成功");
                    }else{
                        this.$Message.error(res.body.data);
                    }
                    this.modalDelete = false;
                });
            },
            updateSubmit: function () {
                this.$http.post('/classroom/update', this.classroom).then(function (res) {
                    if(res.body.status == 200){
                        this.$Message.success("修改成功");
                    }else{
                        this.$Message.error(res.body.data);
                    }
                    this.modalUpdate = false;
                });
            },
            submitQuery: function(){
                this.classrooms = [];
                this.$http.post('/classroom/query', this.classroomQuery).then(function (res) {
                    if(res.body.status == 200){
                        this.classrooms = res.body.data.results;
                        this.classroomQuery.totalRecord = res.body.data.totalRecord;
                    }else{
                        this.$Message.error(res.body.data);
                    }
                });
            },
            exportData: function(type) {
                if (type === 1) {
                    this.$refs.table.exportCsv({
                        filename: '原始数据'
                    });
                } else if (type === 2) {
                    this.$refs.table.exportCsv({
                        filename: '排序和过滤后的数据',
                        original: false
                    });
                } else if (type === 3) {
                    this.$refs.table.exportCsv({
                        filename: '自定义数据',
                        columns: this.columns4.filter(function(col, index) {
                            return index < 4
                        }),
                        data: this.classrooms.filter(function(data, index) {
                            return index < 4
                        })
                    });
                }
            }
        }
    });
    var student = Vue.extend({
        template: '#student',
        data: function() {
            return{
                modalAdd: false,
                students:[],
                email: '',
                studentQuery: {
                    sid: '',
                    id: '',
                    name: '',
                    subjectid: '',
                    pageIndex:1,
                    pageSize:10,
                    totalRecord:0
                },
                student:{
                    sid: '',
                    id: '',
                    name: '',
                    subjectid: '',
                },
                subjects: [],
                columns6: [{
                    "title": "准考证号",
                    "key": "sid",
                    align: 'center',
                }, {
                    "title": "姓名",
                    "key": "name",
                    align: 'center',
                    "sortable": false,
                }, {
                    "title": "身份证号",
                    "key": "id",
                    "sortable": false,
                    align: 'center'
                }, {
                    "title": "考试科目",
                    "key": "subjectid",
                    "sortable": false,
                    align: 'center',
                },{
                    "title": "考场编号",
                    "key": "examroomid",
                    "sortable": false,
                    align: 'center',
                },{
                    "title": "操作",
                    "key": "operate",
                    "sortable": false,
                    align: 'center',
                    render: function (row) {
                        return '<p-button @click="deleteSubmit('+row.sid+','+row.subjectid+')" style="margin-left: 8px" type="error" size="small">删除</p-button>';
                    }
                }],
            }
        },
        created:function () {
            this.email=this.$route.query.email;
        },
        methods: {
            reset: function () {
                this.studentQuery = {};
                this.studentQuery.pageSize = 10;
                this.studentQuery.pageIndex = 1;
                this.studentQuery.totalRecord = 0;
            },
            addClick: function () {
                this.subjects = {};
                this.$http.get('/subject/querysubjects').then(function (res) {
                    this.subjects = res.body.data;
                    this.modalAdd = true;
                });
            },
            addSubmit: function () {
                this.$http.post('/student/add', this.student).then(function (res) {
                    if(res.body.status == 200){
                        this.$Message.success("报名成功");
                    }else{
                        this.$Message.error(res.body.data);
                    }
                    this.modalAdd = false;
                });
            },
            deleteSubmit: function (sid, subjectid) {
                this.student = {};
                this.student.sid = sid;
                this.student.subjectid = subjectid;
                this.$http.post('/student/delete', this.student).then(function (res) {
                    if(res.body.status == 200){
                        this.$Message.success("删除成功");
                    }else{
                        this.$Message.error(res.body.data);
                    }
                });
            },
            submitQuery: function(){
                this.students = [];
                this.$http.post('/student/query', this.studentQuery).then(function (res) {
                    this.students = res.body.data.results;
                    this.studentQuery.totalRecord = res.body.data.totalRecord;
                });
            },
            exportData: function(type) {
                if (type === 1) {
                    this.$refs.table.exportCsv({
                        filename: '原始数据'
                    });
                } else if (type === 2) {
                    this.$refs.table.exportCsv({
                        filename: '排序和过滤后的数据',
                        original: false
                    });
                } else if (type === 3) {
                    this.$refs.table.exportCsv({
                        filename: '自定义数据',
                        columns: this.columns4.filter(function(col, index) {
                            return index < 4
                        }),
                        data: this.classrooms.filter(function(data, index) {
                            return index < 4
                        })
                    });
                }
            }
        }
    });
    var teacher = Vue.extend({
        template: '#teacher',
        data: function() {
            return{
                modalAdd: false,
                modalDelete: false,
                modalUpdate: false,
                IsOrNot:[{
                    value: 'true',
                    label: '是'
                },{
                    value: 'false',
                    label: '否'
                }],
                email: '',
                teacherQuery: {
                    id: '',
                    name: '',
                    isInvigilator:  '',
                    numInvigilator: '',
                    accInvigilator: '',
                    pageIndex:1,
                    pageSize:10,
                    totalRecord:0
                },
                teacher:{
                    id:'',
                    name: '',
                    isInvigilator:  '',
                    numInvigilator: '',
                    accInvigilator: '',
                },

                teachers: [],
                show: false,
                columns7: [{
                    "title": "监考人员编号",
                    "key": 'id',
                    align: 'center',
                }, {
                    "title": "监考人员姓名",
                    "key": "name",
                    align: 'center',
                }, {
                    "title": "开始时间",
                    "key": "starttime",
                    "sortable": false,
                    align: 'center'
                }, {
                    "title": "结束时间",
                    "key": "endtime",
                    "sortable": false,
                    align: 'center',
                },{
                    "title": "是否监考过",
                    "key": "isInvigilator",
                    "sortable": false,
                    align: 'center',
                }
                , {
                        "title": "监考次数",
                        "key": "numInvigilator",
                        "sortable": false,
                        align: 'center',
                    }
                    ,{
                        "title": "有无监考事故",
                        "key": "accInvigilator",
                        "sortable": false,
                        align: 'center',
                    }
                    ,{
                    "title": "操作",
                    "key": "operate",
                    "sortable": false,
                    align: 'center',
                    render: function (row) {
                        return '<p-button @click="updateClick('+row.id+')" style="margin-left: 8px" type="primary" size="small">修改</p-button><p-button @click="deleteSubmit('+row.id+')" style="margin-left: 8px" type="error" size="small">删除</p-button>';
                    }
                }],
            }
        },
        created:function () {
            this.email=this.$route.query.email;
        },
        methods: {
            addClick: function () {
                this.modalAdd = true;
            },
            updateClick: function(id){
                this.teacher = {};
                this.teacher.id = id;
                this.modalUpdate = true;
            },
            addSubmit: function () {
                this.$http.post('/teacher/add', this.teacher).then(function (res) {
                    if(res.body.status == 200){
                        this.$Message.success("添加成功");
                    }else{
                        this.$Message.error(res.body.data);
                    }
                    this.modalAdd = false;
                });
            },
            deleteSubmit: function (id) {
                this.teacher = {};
                this.teacher.id = id;
                this.$http.post('/teacher/delete', this.teacher).then(function (res) {
                    if(res.body.status == 200){
                        this.$Message.success("删除成功");
                    }else{
                        this.$Message.error(res.body.data);
                    }
                    this.modalDelete = false;
                });
            },
            updateSubmit: function () {
                this.$http.post('/teacher/update', this.teacher).then(function (res) {
                    if(res.body.status == 200){
                        this.$Message.success("修改成功");
                    }else{
                        this.$Message.error(res.body.data);
                    }
                    this.modalUpdate = false;
                });
            },
            submitQuery: function(){
                this.teachers = [];
                this.$http.post('/teacher/query', this.teacherQuery).then(function (res) {
                    if(res.body.status == 200){
                        this.teachers = res.body.data.results;
                        this.teacherQuery.totalRecord = res.body.data.totalRecord;
                    }else{
                        this.$Message.error(res.body.data);
                    }
                });
            },
            reset: function () {
                this.teacherQuery.id = '';
                this.teacherQuery.name = '';
                this.teacherQuery.isInvigilator = 'false';
                this.teacherQuery.numInvigilator=0;
                this.teacherQuery.accInvigilator='false';
                this.teacherQuery.pageIndex=1;
                this.teacherQuery.pageSize=10;
                this.teacherQuery.totalRecord=0;
            },
            exportData: function(type) {
                if (type === 1) {
                    this.$refs.table.exportCsv({
                        filename: '原始数据'
                    });
                } else if (type === 2) {
                    this.$refs.table.exportCsv({
                        filename: '排序和过滤后的数据',
                        original: false
                    });
                } else if (type === 3) {
                    this.$refs.table.exportCsv({
                        filename: '自定义数据',
                        columns: this.columns7.filter(function(col, index) {
                            return index < 7
                        }),
                        data: this.teachers.filter(function(data, index) {
                            return index < 7
                        })
                    });
                }
            }
        }
    });
    var subject = Vue.extend({
        template: '#subject',
        data: function() {
            return{
                main: true,
                detail: false,
                modalAdd: false,
                modalAssign: false,
                email: '',
                examroom:{
                    sid: '',
                    number: '',
                },
                subjectQuery: {
                    id: '',
                    name: '',
                    pageIndex: 1,
                    pageSize:10,
                    totalRecord:0
                },
                subject:{
                    id: '',
                    name: '',
                    starttime: '',
                    endtime: '',
                    bmstarttime: '',
                    bmendtime: '',
                    maxnumber: '',
                    minnumber: '0',
                },
                subjects: [],
                students:[],
                columns6: [{
                    "title": "科目编号",
                    "key": "id",
                    align: 'center',
                }, {
                    "title": "科目名称",
                    "key": "name",
                    align: 'center',
                    "sortable": false,
                }, {
                    "title": "报名开始时间",
                    "key": "bmstarttime",
                    "sortable": false,
                    align: 'center'
                }, {
                    "title": "报名截止时间",
                    "key": "bmendtime",
                    "sortable": false,
                    align: 'center',
                },{
                    "title": "考试开始时间",
                    "key": "starttime",
                    "sortable": false,
                    align: 'center',
                },{
                    "title": "考试结束时间",
                    "key": "endtime",
                    "sortable": false,
                    align: 'center',
                },{
                    "title": "最大报名人数",
                    "key": "maxnumber",
                    "sortable": false,
                    align: 'center',
                },{
                    "title": "报名人数",
                    "key": "minnumber",
                    "sortable": false,
                    align: 'center',
                },{
                    "title": "操作",
                    "key": "operate",
                    "sortable": false,
                    align: 'center',
                    render: function (row) {
                        return '<p-button @click="querySubmit('+row.id+')" style="margin-left: 8px" type="primary" size="small">详情</p-button><p-button @click="deleteSubmit('+row.id+')" style="margin-left: 8px" type="error" size="small">删除</p-button>';
                    }
                }],
                columns4: [{
                    "title": "准考证号",
                    "key": "sid",
                    align: 'center',
                }, {
                    "title": "姓名",
                    "key": "name",
                    align: 'center',
                    "sortable": false,
                }, {
                    "title": "身份证号",
                    "key": "id",
                    "sortable": false,
                    align: 'center'
                }, {
                    "title": "考试科目",
                    "key": "subjectid",
                    "sortable": false,
                    align: 'center',
                }],
            }
        },
        created:function () {
            this.email=this.$route.query.email;
        },
        methods: {
            reset: function () {
                this.subjectQuery = {};
                this.subjectQuery.pageSize = 10;
                this.subjectQuery.pageIndex = 1;
                this.subjectQuery.totalRecord = 0;
            },
            assignClick: function () {
                this.modalAssign = true;
            },
            addClick: function () {
                this.modalAdd = true;
            },
            addSubmit: function () {
                this.$http.post('/subject/add', this.subject).then(function (res) {
                    if(res.body.status == 200){
                        this.$Message.success("添加成功");
                    }else{
                        this.$Message.error(res.body.data);
                    }
                    this.modalAdd = false;
                });
            },
            deleteSubmit: function (id) {
                this.subject = {};
                this.subject.id = id;
                this.$http.post('/subject/delete', this.subject).then(function (res) {
                    if(res.body.status == 200){
                        this.$Message.success("删除成功");
                    }else{
                        this.$Message.error(res.body.data);
                    }
                });
            },
            submitQuery: function(){
                this.students = [];
                this.$http.post('/subject/query', this.subjectQuery).then(function (res) {
                    if (res.body.status == 200) {
                        this.subjects = res.body.data.results;
                        this.subjectQuery.totalRecord = res.body.data.totalRecord;
                    }else{
                        this.$Message.error(res.body.data);
                    }
                });
            },
            querySubmit: function (id) {
                this.examroom.sid = id;
                this.$http.get('/student/query/'+id).then(function (res) {
                    if(res.body.status == 200){
                        this.students = res.body.data;
                        this.main = false;
                        this.detail = true;
                    }else{
                        this.$Message.error(res.body.data);
                    }
                });

            },
            goback: function () {
                this.main = true;
                this.detail = false;
            },
            assignSumbit:function () {
                this.$http.post('/subject/assign', this.xeamroom){
                    
                }
            },
            exportData: function(type) {
                if (type === 1) {
                    this.$refs.table.exportCsv({
                        filename: '原始数据'
                    });
                } else if (type === 2) {
                    this.$refs.table.exportCsv({
                        filename: '排序和过滤后的数据',
                        original: false
                    });
                } else if (type === 3) {
                    this.$refs.table.exportCsv({
                        filename: '自定义数据',
                        columns: this.columns4.filter(function(col, index) {
                            return index < 4
                        }),
                        data: this.classrooms.filter(function(data, index) {
                            return index < 4
                        })
                    });
                }
            }
        }
    });
    var App = Vue.extend({
        template: '#index',
        data: function() {
            return {
                theme: 'dark',
                register:{
                    name: '',
                    email: '',
                    password: '',
                }
            }
        },
        created:function () {
            this.register.email=this.$route.query.email;
        },
        methods: {
            examroomQuery: function () {
                this.$router.go({
                    path:'/index/examroom',
                    query: {email: this.register.email}
                });
            },
            classroomQuery: function () {
                this.$router.go({
                    path:'/index/classroom',
                    query: {email: this.register.email}
                });
            },
            teacherQuery: function () {
                this.$router.go({
                    path:'/index/teacher',
                    query: {email: this.register.email}
                });
            },
            studentQuery: function () {
                this.$router.go({
                    path:'/index/student',
                    query: {email: this.register.email}
                });
            },
            subjectQuery: function () {
                this.$router.go({
                    path:'/index/subject',
                    query: {email: this.register.email}
                });
            },
            quitQuery: function () {
                this.$http.post('/index/quit', this.register.email);
                this.$router.go({
                    path:'/'
                });
            },
        }
    });
    var Root = Vue.extend({});
    var router = new VueRouter();
    router.map({
        '/': {name: 'main', component: LoginView},
        '/index': {
            component: App,
            subRoutes: {
                '/examroom': {name: 'examroom', component: examroom},
                '/classroom': {name: 'classroom', component: classroom},
                '/student': {name: 'student', component: student},
                '/teacher': {name: 'teacher', component: teacher},
                '/subject': {name: 'subject', component: subject},
            }
        },
    });
    router.start(Root, '#root');
</script>

<link href="/css/app.css" rel="stylesheet" type="text/css"/>
</body>
</html>
